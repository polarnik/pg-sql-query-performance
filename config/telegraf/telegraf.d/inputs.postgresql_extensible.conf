
###############################################################################
#                            INPUT PLUGINS                                    #
###############################################################################
 
[[inputs.postgresql_extensible]]
    interval = "60s"
    address = "postgres://test:test@sql_monitor_postgres:5432/postgres"
 
    [[inputs.postgresql_extensible.query]]
        sqlquery = "SELECT * FROM monitoring_stat_statements()"
        tagvalue = "usename,datname,query,query_md5,queryid"
        withdbname = false
        measurement = "pg_stat_statements"
 
    [inputs.postgresql_extensible.tags]
        db_and_stand = "telegraf_pg_demo"
        host = "sql_monitor_postgres"
 
 
[[inputs.postgresql_extensible]]
    interval = "5s"
    address = "postgres://test:test@sql_monitor_postgres:5432/postgres"
 
    [[inputs.postgresql_extensible.query]]
        sqlquery = "SELECT * FROM monitoring_stat_activity_count()"
        tagvalue = "usename,datname,state"
        withdbname = false
        measurement = "pg_stat_activity_count"
 
    [[inputs.postgresql_extensible.query]]
        sqlquery = "SELECT * FROM monitoring_stat_activity_idle_in_transaction()"
        tagvalue = "usename,datname,state,query_md5"
        withdbname = false
        measurement = "pg_stat_activity_idle_in_transaction"
 
    [[inputs.postgresql_extensible.query]]
        sqlquery = "SELECT * FROM monitoring_stat_activity_idle()"
        tagvalue = "usename,datname,state,query_md5"
        withdbname = false
        measurement = "pg_stat_activity_idle"
 
    [[inputs.postgresql_extensible.query]]
        sqlquery = "SELECT * FROM monitoring_stat_activity_waiting()"
        tagvalue = "usename,datname,state,query_md5"
        withdbname = false
        measurement = "pg_stat_activity_waiting"
 
    [inputs.postgresql_extensible.tags]
        db_and_stand = "telegraf_pg_demo"
        host = "sql_monitor_postgres"